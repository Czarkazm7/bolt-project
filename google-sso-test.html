<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google SSO Test</title>
    <style>
        body { font-family: sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; margin: 0; background-color: #f0f0f0; }
        .container { background-color: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); text-align: center; }
        button { background-color: #4285F4; color: white; border: none; padding: 12px 20px; border-radius: 5px; cursor: pointer; font-size: 16px; display: flex; align-items: center; justify-content: center; gap: 10px; margin-top: 20px; }
        button:hover { background-color: #357ae8; }
        .user-info { margin-top: 20px; font-size: 18px; font-weight: bold; }
        .error-message { color: red; margin-top: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Test Google Sign-In</h1>
        <button id="google-signin-button">
            <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M17.64 9.2045C17.64 8.5645 17.58 7.9545 17.47 7.3645H9V10.6345H13.87C13.66 11.7345 13.0 12.6145 12.04 13.2245V15.4945H14.82C16.46 13.9445 17.64 11.7345 17.64 9.2045Z" fill="#4285F4"/>
                <path d="M9 18C11.43 18 13.46 17.22 14.82 15.49L12.04 13.22C11.3 13.72 10.25 14.04 9 14.04C6.72 14.04 4.79 12.59 4.08 10.63H1.19V12.96C2.69 15.98 5.69 18 9 18Z" fill="#34A853"/>
                <path d="M4.08 10.63C3.9 10.09 3.8 9.55 3.8 9C3.8 8.45 3.9 7.91 4.08 7.37V5.04H1.19C0.43 6.52 0 7.75 0 9C0 10.25 0.43 11.48 1.19 12.96L4.08 10.63Z" fill="#FBBC04"/>
                <path d="M9 3.96C10.21 3.96 11.31 4.39 12.21 5.23L14.89 2.55C13.46 1.02 11.43 0 9 0C5.69 0 2.69 2.02 1.19 5.04L4.08 7.37C4.79 5.41 6.72 3.96 9 3.96Z" fill="#EA4335"/>
            </svg>
            Sign in with Google
        </button>
        <div id="user-display" class="user-info"></div>
        <div id="error-display" class="error-message"></div>
    </div>

    <!-- Firebase SDKs -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js';
        import { getAuth, GoogleAuthProvider, signInWithPopup } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js';

        // Your Firebase project configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAttCESYNOxAdshSvDEnTYY_Zp1cfhgDUw",
            authDomain: "calculatorbear-29a76.firebaseapp.com",
            projectId: "calculatorbear-29a76",
            storageBucket: "calculatorbear-29a76.appspot.com",
            messagingSenderId: "407349466415",
            appId: "1:407349466415:web:436cbde68e223ea031bdda",
            measurementId: "G-DL7D2FBLGL"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const provider = new GoogleAuthProvider();

        const googleSignInButton = document.getElementById('google-signin-button');
        const userDisplay = document.getElementById('user-display');
        const errorDisplay = document.getElementById('error-display');

        googleSignInButton.addEventListener('click', async () => {
            userDisplay.textContent = '';
            errorDisplay.textContent = '';
            try {
                const result = await signInWithPopup(auth, provider);
                // This gives you a Google Access Token. You can use it to access the Google API.
                const credential = GoogleAuthProvider.credentialFromResult(result);
                const token = credential.accessToken;
                // The signed-in user info.
                const user = result.user;

                console.log('Google Sign-in successful:', user);
                userDisplay.textContent = `Logged in as: ${user.displayName || user.email}`;
                alert(`Successfully logged in as: ${user.displayName || user.email}`);

            } catch (error) {
                // Handle Errors here.
                const errorCode = error.code;
                const errorMessage = error.message;
                // The email of the user's account used.
                const email = error.customData?.email;
                // The AuthCredential type that was used.
                const credential = GoogleAuthProvider.credentialFromError(error);

                console.error('Google Sign-in error:', errorCode, errorMessage, email, credential);
                errorDisplay.textContent = `Error: ${errorMessage}`;
                alert(`Google Sign-in failed: ${errorMessage}`);
            }
        });
    </script>
</body>
</html>